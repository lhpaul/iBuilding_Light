{
  "name": "testrest",
  "description": "REST API Testing Helpers (designed for use with Mocha)",
  "author": {
    "name": "Damon Oehlman",
    "email": "damon.oehlman@sidelab.com"
  },
  "tags": [
    "rest",
    "test",
    "testing",
    "mocha"
  ],
  "version": "0.5.0",
  "engines": {
    "node": ">= 0.6.x < 0.9.0"
  },
  "dependencies": {
    "async": "0.1.x",
    "debug": "*",
    "formatter": "0.1.x",
    "js-yaml": "1.0.x",
    "matches": "0.3.x",
    "request": "2.11.x",
    "underscore": "1.3.x"
  },
  "devDependencies": {
    "cookies": "0.3.x",
    "mocha": "1.4.x",
    "tako": "git://github.com/DamonOehlman/tako.git",
    "testrest": "git://github.com/DamonOehlman/testrest.git"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/DamonOehlman/testrest.git"
  },
  "bugs": {
    "url": "http://github.com/DamonOehlman/testrest/issues"
  },
  "scripts": {
    "test": "./node_modules/.bin/mocha --reporter spec"
  },
  "contributors": [],
  "optionalDependencies": {},
  "readme": "# testREST - REST API Testing Solution\n\n__NOTE:__ _testREST is currently a work in progress, feel free to use it, and please report issues, but don't get upset when it doesn't quite do what you expect it to._\n\n<a href=\"http://travis-ci.org/#!/DamonOehlman/testrest\"><img src=\"https://secure.travis-ci.org/DamonOehlman/testrest.png\" alt=\"Build Status\"></a>\n\ntestREST is a helper for writing unit tests against a REST API.  It's been written to fill a gap in current testing solutions for testing a REST API.  While a [few people](http://stackoverflow.com/questions/203495/testing-rest-webservices) are happy using [SoapUI](http://www.soapui.org/) for testing webservices in general, I think things could be better.\n\ntestREST is an experiment at determining if this is the case.  In testREST you:\n\n1. Define your tests with plain text files in a simple format\n2. Use [mocha](https://github.com/visionmedia/mocha) to run your tests\n\n## Alternative (Good) Solutions\n\nSome good alternatives to testrest are:\n\n- [nock](https://github.com/pgte/nock) (thanks to [dscape](http://twitter.com/dscape) for the tip).\n\n## Installing\n\nYou can install testrest into a node project like so using `npm`: \n\n```\nnpm install testrest\n```\n\nIn reality, though you probably want to add it into your `package.json` file as a dev dependency so users of your library / application aren't required to download the package, e.g.:\n\n```json\n{\n  \"name\": \"package-name\",\n    \n  ..\n  \n  \"dependencies\": {\n  }\n  \n  \"devDependencies\": {\n    \"testrest\": \"*\"\n  },\n\n  ..\n}\n```\n\n## Spec File Format\n\nThe library is very much under development at this stage, but it would be great to get some feedback on the proposed spec file format:\n\nDisplayed below is the spec file format that is currently being used.  A spec file allows for the definition of multiple end-point tests which will be executed sequentially.\n\n```\n# test description 1\nMETHOD /uri\n> Send-Header: value\nrequest body text\n\nEXPECT code\n< Expected-Header: value\nresponse body\n\n# test description 2\nMETHOD /uri/2\n> Send-Header: value\nrequest body text\n\nEXPECT code\n< Expected-Header: value\nresponse body\n```\n\n### Spec File Examples\n\n```\n# returns a 404 for /does-not-exist\nGET /does-not-exist\nEXPECT 404\n\n# returns Hi for /\nGET /\n\nEXPECT 2xx\nHi\n< Server: restify\n```\n\n## JSON Response Parsing\n\nIf you specify JSON as the expected body of your response then a [chai.js](http://chaijs.com/) [deepEqual](http://chaijs.com/code/assert.html#deepEqual) is used to validate the response matches your expected response rather than a simple `equal` test.  \n\nThe behaviour of this checking is selective also.  That is only the sections of the JSON response that you specify in the test will be checked against the response.  For instance, the following tests both return true:\n\n```\n# returns valid JSON for /json-test\nGET /json-test\nEXPECT 2xx\n{\n    \"first\": \"Roger\",\n    \"last\": \"Rabbit\"\n}\n\n# partial JSON tests are ok too\nGET /json-test\nEXPECT 2xx\n{\n    \"first\": \"Roger\"\n}\n```\n\n## Creating Test Wrappers\n\nWhen using Mocha, you define your tests in a number of `.js` files and Mocha intelligently turns these into it's own internal test representation, so without some simple glue Mocha is not going to interpret out `.txt` files as tests that need to be run.\n\nWe fix this by creating a simple wrapper file.  Shown below is an example from the [Sidelab Pointifex Reference Server](https://github.com/pointifex/reference-server) test suite:\n\n```js\nvar testrest = require('testrest'),\n    server = require('../lib/server');\n    \ndescribe('pointifex reference server tests', function() {\n    before(function(done) {\n        server.run(done);\n    });\n    \n    // describe the details interface\n    describe('details interface', testrest('details'));    \n});\n```\n\nYou will see here the call to `testrest` in place of a function for the test suite body as part of the describe statement.  \n\nIn this particular case a named test suite is being pulled in in the `testrest` call and a mocha test suite is returned.  The `testrest` function can also be used to return the testsuite that relates to the currently executing `.js` wrapper by simply calling `testrest()` with no arguments.\n\nIf you want to use a different `.txt` file that one that matches the current `.js` file, then you can provide the name of the alternative suite to the `testrest` function call.\n\nRunning the above test (using `mocha --reporter spec`) would provide the following output:\n\n```\nGET tests\n  ✓ can load the definition file: simple-get.txt \n  ✓ can parse the definition file \n  ✓ loads the rules as new tests \n  ✓ returns a 404 for /does-not-exist \n  ✓ returns Hi for / \n\n\n✔ 5 tests complete (19ms)\n```",
  "readmeFilename": "README.md",
  "_id": "testrest@0.5.0",
  "dist": {
    "shasum": "90e395038b6e20d62b62fa195e5987364501941d"
  },
  "_from": "testrest"
}
