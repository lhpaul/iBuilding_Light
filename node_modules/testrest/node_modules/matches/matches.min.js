// matches.js
// ----------
// Powerful pattern matching for Javascript
//
// version : 0.3.1
// author  : Nathan Faubion <nathan@n-son.com>
// license : MIT
(function(){function require(e){return require.modules[e]}require.modules={},require.modules["./parser"]=function(){var e={exports:{}},t=e.exports;return e.exports=function(){function quote(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,t){function padLeft(e,t,n){var r=e,i=n-e.length;for(var s=0;s<i;s++)r=t+r;return r}function escape(e){var t=e.charCodeAt(0),n,r;return t<=255?(n="x",r=2):(n="u",r=4),"\\"+n+padLeft(t.toString(16).toUpperCase(),"0",r)}function matchFailed(e){if(r<s)return;r>s&&(s=r,o=[]),o.push(e)}function parse_start(){var e,t,n,i,s;return i=r,s=r,e=parse__(),e!==null?(t=parse_argumentList(),t!==null?(n=parse__(),n!==null?e=[e,t,n]:(e=null,r=s)):(e=null,r=s)):(e=null,r=s),e!==null&&(e=function(e,t){return t}(i,e[1])),e===null&&(r=i),e}function parse_argumentList(){var e,t;return t=r,e=parse_patterns(),e!==null&&(e=function(e,t){var n=patternStrings(t);return{pattern:n.join(","),type:"argumentList",value:t}}(t,e)),e===null&&(r=t),e}function parse_array(){var t,n,s,o,u,a,f;return a=r,f=r,e.charCodeAt(r)===91?(t="[",r++):(t=null,i===0&&matchFailed('"["')),t!==null?(n=parse__(),n!==null?(s=parse_arrayRestPatterns(),s=s!==null?s:"",s!==null?(o=parse__(),o!==null?(e.charCodeAt(r)===93?(u="]",r++):(u=null,i===0&&matchFailed('"]"')),u!==null?t=[t,n,s,o,u]:(t=null,r=f)):(t=null,r=f)):(t=null,r=f)):(t=null,r=f)):(t=null,r=f),t!==null&&(t=function(e,t){t||(t=[]);var n=patternStrings(t),r="["+n.join(",")+"]";return hasMultiRest(t)&&throwMultRestError(r),{pattern:r,type:"array",children:t}}(a,t[2])),t===null&&(r=a),t}function parse_object(){var t,n,s,o,u,a,f;return a=r,f=r,e.charCodeAt(r)===123?(t="{",r++):(t=null,i===0&&matchFailed('"{"')),t!==null?(n=parse__(),n!==null?(s=parse_objectRestPatterns(),s=s!==null?s:"",s!==null?(o=parse__(),o!==null?(e.charCodeAt(r)===125?(u="}",r++):(u=null,i===0&&matchFailed('"}"')),u!==null?t=[t,n,s,o,u]:(t=null,r=f)):(t=null,r=f)):(t=null,r=f)):(t=null,r=f)):(t=null,r=f),t!==null&&(t=function(e,t){t||(t=[]);var n=patternStrings(t),r="{"+n.join(",")+"}";return hasMultiRest(t)&&throwMultRestError(r),{pattern:r,type:"object",children:t}}(a,t[2])),t===null&&(r=a),t}function parse_classArray(){var t,n,s,o,u,a,f,l;return f=r,l=r,t=parse_classNameChars(),t!==null?(e.charCodeAt(r)===40?(n="(",r++):(n=null,i===0&&matchFailed('"("')),n!==null?(s=parse__(),s!==null?(o=parse_arrayRestPatterns(),o=o!==null?o:"",o!==null?(u=parse__(),u!==null?(e.charCodeAt(r)===41?(a=")",r++):(a=null,i===0&&matchFailed('")"')),a!==null?t=[t,n,s,o,u,a]:(t=null,r=l)):(t=null,r=l)):(t=null,r=l)):(t=null,r=l)):(t=null,r=l)):(t=null,r=l),t!==null&&(t=function(e,t,n){n||(n=[]);var r=patternStrings(n),i=t+"("+r.join(",")+")";return hasMultiRest(n)&&throwMultRestError(i),{pattern:i,type:"classArray",value:t,children:n}}(f,t[0],t[3])),t===null&&(r=f),t}function parse_classObject(){var t,n,s,o,u,a,f,l;return f=r,l=r,t=parse_classNameChars(),t!==null?(e.charCodeAt(r)===123?(n="{",r++):(n=null,i===0&&matchFailed('"{"')),n!==null?(s=parse__(),s!==null?(o=parse_objectRestPatterns(),o=o!==null?o:"",o!==null?(u=parse__(),u!==null?(e.charCodeAt(r)===125?(a="}",r++):(a=null,i===0&&matchFailed('"}"')),a!==null?t=[t,n,s,o,u,a]:(t=null,r=l)):(t=null,r=l)):(t=null,r=l)):(t=null,r=l)):(t=null,r=l)):(t=null,r=l),t!==null&&(t=function(e,t,n){n||(n=[]);var r=patternStrings(n),i=t+"{"+r.join(",")+"}";return hasMultiRest(n)&&throwMultRestError(i),{pattern:i,type:"classObject",value:t,children:n}}(f,t[0],t[3])),t===null&&(r=f),t}function parse_capture(){var t,n,s,o,u,a,f;return a=r,f=r,t=parse_identifierChars(),t!==null?(n=parse__(),n!==null?(e.charCodeAt(r)===64?(s="@",r++):(s=null,i===0&&matchFailed('"@"')),s!==null?(o=parse__(),o!==null?(u=parse_capturePattern(),u!==null?t=[t,n,s,o,u]:(t=null,r=f)):(t=null,r=f)):(t=null,r=f)):(t=null,r=f)):(t=null,r=f),t!==null&&(t=function(e,t,n){return{pattern:t+"@"+n.pattern,type:"capture",value:t,children:[n]}}(a,t[0],t[4])),t===null&&(r=a),t}function parse_keyValue(){var t,n,s,o,u,a,f;return a=r,f=r,t=parse_keyChars(),t!==null?(n=parse__(),n!==null?(e.charCodeAt(r)===58?(s=":",r++):(s=null,i===0&&matchFailed('":"')),s!==null?(o=parse__(),o!==null?(u=parse_pattern(),u!==null?t=[t,n,s,o,u]:(t=null,r=f)):(t=null,r=f)):(t=null,r=f)):(t=null,r=f)):(t=null,r=f),t!==null&&(t=function(e,t,n){return{pattern:quote(t)+":"+n.pattern,type:"keyValue",value:quote(t),children:[n]}}(a,t[0],t[4])),t===null&&(r=a),t}function parse_patterns(){var t,n,s,o,u,a,f,l,c;f=r,l=r,t=parse_pattern();if(t!==null){n=[],c=r,s=parse__(),s!==null?(e.charCodeAt(r)===44?(o=",",r++):(o=null,i===0&&matchFailed('","')),o!==null?(u=parse__(),u!==null?(a=parse_pattern(),a!==null?s=[s,o,u,a]:(s=null,r=c)):(s=null,r=c)):(s=null,r=c)):(s=null,r=c);while(s!==null)n.push(s),c=r,s=parse__(),s!==null?(e.charCodeAt(r)===44?(o=",",r++):(o=null,i===0&&matchFailed('","')),o!==null?(u=parse__(),u!==null?(a=parse_pattern(),a!==null?s=[s,o,u,a]:(s=null,r=c)):(s=null,r=c)):(s=null,r=c)):(s=null,r=c);n!==null?t=[t,n]:(t=null,r=l)}else t=null,r=l;return t!==null&&(t=function(e,t,n){return headTailMerge(t,n,3)}(f,t[0],t[1])),t===null&&(r=f),t}function parse_pattern(){var e;return e=parse_wildcard(),e===null&&(e=parse_nullLiteral(),e===null&&(e=parse_undefinedLiteral(),e===null&&(e=parse_booleanLiteral(),e===null&&(e=parse_numberLiteral(),e===null&&(e=parse_stringLiteral(),e===null&&(e=parse_classArray(),e===null&&(e=parse_classObject(),e===null&&(e=parse_className(),e===null&&(e=parse_array(),e===null&&(e=parse_object(),e===null&&(e=parse_capture(),e===null&&(e=parse_identifier())))))))))))),e}function parse_capturePattern(){var e;return e=parse_classArray(),e===null&&(e=parse_classObject(),e===null&&(e=parse_className(),e===null&&(e=parse_array(),e===null&&(e=parse_object())))),e}function parse_arrayRestPatterns(){var t,n,s,o,u,a,f,l,c;f=r,l=r,t=parse_restPattern(),t===null&&(t=parse_pattern());if(t!==null){n=[],c=r,s=parse__(),s!==null?(e.charCodeAt(r)===44?(o=",",r++):(o=null,i===0&&matchFailed('","')),o!==null?(u=parse__(),u!==null?(a=parse_restPattern(),a===null&&(a=parse_pattern()),a!==null?s=[s,o,u,a]:(s=null,r=c)):(s=null,r=c)):(s=null,r=c)):(s=null,r=c);while(s!==null)n.push(s),c=r,s=parse__(),s!==null?(e.charCodeAt(r)===44?(o=",",r++):(o=null,i===0&&matchFailed('","')),o!==null?(u=parse__(),u!==null?(a=parse_restPattern(),a===null&&(a=parse_pattern()),a!==null?s=[s,o,u,a]:(s=null,r=c)):(s=null,r=c)):(s=null,r=c)):(s=null,r=c);n!==null?t=[t,n]:(t=null,r=l)}else t=null,r=l;return t!==null&&(t=function(e,t,n){return headTailMerge(t,n,3)}(f,t[0],t[1])),t===null&&(r=f),t}function parse_objectRestPatterns(){var t,n,s,o,u,a,f,l,c;f=r,l=r,t=parse_restPattern(),t===null&&(t=parse_objectPattern());if(t!==null){n=[],c=r,s=parse__(),s!==null?(e.charCodeAt(r)===44?(o=",",r++):(o=null,i===0&&matchFailed('","')),o!==null?(u=parse__(),u!==null?(a=parse_restPattern(),a===null&&(a=parse_objectPattern()),a!==null?s=[s,o,u,a]:(s=null,r=c)):(s=null,r=c)):(s=null,r=c)):(s=null,r=c);while(s!==null)n.push(s),c=r,s=parse__(),s!==null?(e.charCodeAt(r)===44?(o=",",r++):(o=null,i===0&&matchFailed('","')),o!==null?(u=parse__(),u!==null?(a=parse_restPattern(),a===null&&(a=parse_objectPattern()),a!==null?s=[s,o,u,a]:(s=null,r=c)):(s=null,r=c)):(s=null,r=c)):(s=null,r=c);n!==null?t=[t,n]:(t=null,r=l)}else t=null,r=l;return t!==null&&(t=function(e,t,n){return headTailMerge(t,n,3)}(f,t[0],t[1])),t===null&&(r=f),t}function parse_objectPattern(){var e;return e=parse_keyValue(),e===null&&(e=parse_key()),e}function parse_restPattern(){var e;return e=parse_restIdentifier(),e===null&&(e=parse_rest()),e}function parse_wildcard(){var t,n;return n=r,e.charCodeAt(r)===95?(t="_",r++):(t=null,i===0&&matchFailed('"_"')),t!==null&&(t=function(e){return{pattern:"_",type:"wildcard"}}(n)),t===null&&(r=n),t}function parse_identifier(){var e,t;return t=r,e=parse_identifierChars(),e!==null&&(e=function(e,t){return{pattern:t,type:"identifier",value:t}}(t,e)),e===null&&(r=t),e}function parse_jsIdentifier(){var e,t;return t=r,e=parse_jsIdentifierChars(),e!==null&&(e=function(e,t){return{pattern:t,type:"jsIdentifier",value:t}}(t,e)),e===null&&(r=t),e}function parse_restIdentifier(){var e,t,n,i;return n=r,i=r,e=parse_identifierChars(),e!==null?(t=parse_restChars(),t!==null?e=[e,t]:(e=null,r=i)):(e=null,r=i),e!==null&&(e=function(e,t){return{pattern:t+"...",type:"restIdentifier",value:t}}(n,e[0])),e===null&&(r=n),e}function parse_rest(){var e,t;return t=r,e=parse_restChars(),e!==null&&(e=function(e){return{pattern:"...",type:"rest"}}(t)),e===null&&(r=t),e}function parse_className(){var e,t;return t=r,e=parse_classNameChars(),e!==null&&(e=function(e,t){return{pattern:t,type:"className",value:t}}(t,e)),e===null&&(r=t),e}function parse_key(){var e,t;return t=r,e=parse_keyChars(),e!==null&&(e=function(e,t){return{pattern:quote(t),type:"key",value:quote(t)}}(t,e)),e===null&&(r=t),e}function parse_nullLiteral(){var t,n;return n=r,e.substr(r,4)==="null"?(t="null",r+=4):(t=null,i===0&&matchFailed('"null"')),t!==null&&(t=function(e){return{pattern:"null",type:"null"}}(n)),t===null&&(r=n),t}function parse_undefinedLiteral(){var t,n;return n=r,e.substr(r,9)==="undefined"?(t="undefined",r+=9):(t=null,i===0&&matchFailed('"undefined"')),t!==null&&(t=function(e){return{pattern:"undefined",type:"undefined"}}(n)),t===null&&(r=n),t}function parse_booleanLiteral(){var e,t;return t=r,e=parse_boolean(),e!==null&&(e=function(e,t){return{pattern:t,type:"boolean",value:t==="true"}}(t,e)),e===null&&(r=t),e}function parse_numberLiteral(){var e,t;return t=r,e=parse_number(),e!==null&&(e=function(e,t){return{pattern:t,type:"number",value:parseFloat(t)}}(t,e)),e===null&&(r=t),e}function parse_stringLiteral(){var e,t;return t=r,e=parse_string(),e!==null&&(e=function(e,t){return{pattern:quote(t),type:"string",value:t}}(t,e)),e===null&&(r=t),e}function parse_boolean(){var t;return e.substr(r,4)==="true"?(t="true",r+=4):(t=null,i===0&&matchFailed('"true"')),t===null&&(e.substr(r,5)==="false"?(t="false",r+=5):(t=null,i===0&&matchFailed('"false"'))),t}function parse_keyChars(){var e;return e=parse_jsIdentifierChars(),e===null&&(e=parse_string()),e}function parse_restChars(){var t;return e.substr(r,3)==="..."?(t="...",r+=3):(t=null,i===0&&matchFailed('"..."')),t}function parse_identifierChars(){var t,n,s,o,u;i++,o=r,u=r,/^[a-z]/.test(e.charAt(r))?(t=e.charAt(r),r++):(t=null,i===0&&matchFailed("[a-z]"));if(t!==null){n=[],/^[_$a-zA-Z0-9]/.test(e.charAt(r))?(s=e.charAt(r),r++):(s=null,i===0&&matchFailed("[_$a-zA-Z0-9]"));while(s!==null)n.push(s),/^[_$a-zA-Z0-9]/.test(e.charAt(r))?(s=e.charAt(r),r++):(s=null,i===0&&matchFailed("[_$a-zA-Z0-9]"));n!==null?t=[t,n]:(t=null,r=u)}else t=null,r=u;return t!==null&&(t=function(e,t,n){return t+n.join("")}(o,t[0],t[1])),t===null&&(r=o),i--,i===0&&t===null&&matchFailed("identifier"),t}function parse_classNameChars(){var t,n,s,o,u;i++,o=r,u=r,/^[A-Z]/.test(e.charAt(r))?(t=e.charAt(r),r++):(t=null,i===0&&matchFailed("[A-Z]"));if(t!==null){n=[],/^[_$a-zA-Z0-9]/.test(e.charAt(r))?(s=e.charAt(r),r++):(s=null,i===0&&matchFailed("[_$a-zA-Z0-9]"));while(s!==null)n.push(s),/^[_$a-zA-Z0-9]/.test(e.charAt(r))?(s=e.charAt(r),r++):(s=null,i===0&&matchFailed("[_$a-zA-Z0-9]"));n!==null?t=[t,n]:(t=null,r=u)}else t=null,r=u;return t!==null&&(t=function(e,t,n){return t+n.join("")}(o,t[0],t[1])),t===null&&(r=o),i--,i===0&&t===null&&matchFailed("class name"),t}function parse_jsIdentifierChars(){var t,n,s,o,u;i++,o=r,u=r,/^[_$a-zA-Z]/.test(e.charAt(r))?(t=e.charAt(r),r++):(t=null,i===0&&matchFailed("[_$a-zA-Z]"));if(t!==null){n=[],/^[_$a-zA-Z0-9]/.test(e.charAt(r))?(s=e.charAt(r),r++):(s=null,i===0&&matchFailed("[_$a-zA-Z0-9]"));while(s!==null)n.push(s),/^[_$a-zA-Z0-9]/.test(e.charAt(r))?(s=e.charAt(r),r++):(s=null,i===0&&matchFailed("[_$a-zA-Z0-9]"));n!==null?t=[t,n]:(t=null,r=u)}else t=null,r=u;return t!==null&&(t=function(e,t,n){return t+n.join("")}(o,t[0],t[1])),t===null&&(r=o),i--,i===0&&t===null&&matchFailed("Javascript identifier"),t}function parse_string(){var t,n,s,o,u;return o=r,u=r,e.charCodeAt(r)===34?(t='"',r++):(t=null,i===0&&matchFailed('"\\""')),t!==null?(n=parse_doubleQuotedStringChars(),n=n!==null?n:"",n!==null?(e.charCodeAt(r)===34?(s='"',r++):(s=null,i===0&&matchFailed('"\\""')),s!==null?t=[t,n,s]:(t=null,r=u)):(t=null,r=u)):(t=null,r=u),t===null&&(u=r,e.charCodeAt(r)===39?(t="'",r++):(t=null,i===0&&matchFailed('"\'"')),t!==null?(n=parse_singleQuotedStringChars(),n=n!==null?n:"",n!==null?(e.charCodeAt(r)===39?(s="'",r++):(s=null,i===0&&matchFailed('"\'"')),s!==null?t=[t,n,s]:(t=null,r=u)):(t=null,r=u)):(t=null,r=u)),t!==null&&(t=function(e,t){return t[1]}(o,t)),t===null&&(r=o),t}function parse_doubleQuotedStringChars(){var e,t,n;n=r,t=parse_doubleQuotedStringChar();if(t!==null){e=[];while(t!==null)e.push(t),t=parse_doubleQuotedStringChar()}else e=null;return e!==null&&(e=function(e,t){return t.join("")}(n,e)),e===null&&(r=n),e}function parse_singleQuotedStringChars(){var e,t,n;n=r,t=parse_singleQuotedStringChar();if(t!==null){e=[];while(t!==null)e.push(t),t=parse_singleQuotedStringChar()}else e=null;return e!==null&&(e=function(e,t){return t.join("")}(n,e)),e===null&&(r=n),e}function parse_doubleQuotedStringChar(){var t,n,s,o,u;return s=r,o=r,u=r,i++,e.charCodeAt(r)===34?(t='"',r++):(t=null,i===0&&matchFailed('"\\""')),t===null&&(e.charCodeAt(r)===92?(t="\\",r++):(t=null,i===0&&matchFailed('"\\\\"'))),i--,t===null?t="":(t=null,r=u),t!==null?(n=parse_sourceChar(),n!==null?t=[t,n]:(t=null,r=o)):(t=null,r=o),t!==null&&(t=function(e,t){return t}(s,t[1])),t===null&&(r=s),t===null&&(s=r,o=r,e.charCodeAt(r)===92?(t="\\",r++):(t=null,i===0&&matchFailed('"\\\\"')),t!==null?(n=parse_escapeSequence(),n!==null?t=[t,n]:(t=null,r=o)):(t=null,r=o),t!==null&&(t=function(e,t){return t}(s,t[1])),t===null&&(r=s)),t}function parse_singleQuotedStringChar(){var t,n,s,o,u;return s=r,o=r,u=r,i++,e.charCodeAt(r)===39?(t="'",r++):(t=null,i===0&&matchFailed('"\'"')),t===null&&(e.charCodeAt(r)===92?(t="\\",r++):(t=null,i===0&&matchFailed('"\\\\"'))),i--,t===null?t="":(t=null,r=u),t!==null?(n=parse_sourceChar(),n!==null?t=[t,n]:(t=null,r=o)):(t=null,r=o),t!==null&&(t=function(e,t){return t}(s,t[1])),t===null&&(r=s),t===null&&(s=r,o=r,e.charCodeAt(r)===92?(t="\\",r++):(t=null,i===0&&matchFailed('"\\\\"')),t!==null?(n=parse_escapeSequence(),n!==null?t=[t,n]:(t=null,r=o)):(t=null,r=o),t!==null&&(t=function(e,t){return t}(s,t[1])),t===null&&(r=s)),t}function parse_escapeSequence(){var e;return e=parse_charEscapeSequence(),e===null&&(e=parse_nullEscapeSequence(),e===null&&(e=parse_hexEscapeSequence(),e===null&&(e=parse_unicodeEscapeSequence()))),e}function parse_hexEscapeSequence(){var t,n,s,o,u;return o=r,u=r,e.charCodeAt(r)===120?(t="x",r++):(t=null,i===0&&matchFailed('"x"')),t!==null?(n=parse_digitHex(),n!==null?(s=parse_digitHex(),s!==null?t=[t,n,s]:(t=null,r=u)):(t=null,r=u)):(t=null,r=u),t!==null&&(t=function(e,t,n){return String.fromCharCode(parseInt("0x"+t+n))}(o,t[1],t[2])),t===null&&(r=o),t}function parse_unicodeEscapeSequence(){var t,n,s,o,u,a,f;return a=r,f=r,e.charCodeAt(r)===117?(t="u",r++):(t=null,i===0&&matchFailed('"u"')),t!==null?(n=parse_digitHex(),n!==null?(s=parse_digitHex(),s!==null?(o=parse_digitHex(),o!==null?(u=parse_digitHex(),u!==null?t=[t,n,s,o,u]:(t=null,r=f)):(t=null,r=f)):(t=null,r=f)):(t=null,r=f)):(t=null,r=f),t!==null&&(t=function(e,t,n,r,i){return String.fromCharCode(parseInt("0x"+t+n+r+i))}(a,t[1],t[2],t[3],t[4])),t===null&&(r=a),t}function parse_nullEscapeSequence(){var t,n,s,o,u;return s=r,o=r,e.charCodeAt(r)===48?(t="0",r++):(t=null,i===0&&matchFailed('"0"')),t!==null?(u=r,i++,n=parse_digit(),i--,n===null?n="":(n=null,r=u),n!==null?t=[t,n]:(t=null,r=o)):(t=null,r=o),t!==null&&(t=function(e){return"\0"}(s)),t===null&&(r=s),t}function parse_charEscapeSequence(){var e;return e=parse_singleEscapeChar(),e===null&&(e=parse_nonEscapeChar()),e}function parse_singleEscapeChar(){var t,n;return n=r,/^['"\\bfnrtv]/.test(e.charAt(r))?(t=e.charAt(r),r++):(t=null,i===0&&matchFailed("['\"\\\\bfnrtv]")),t!==null&&(t=function(e,t){return t.replace("b","\b").replace("f","\f").replace("n","\n").replace("r","\r").replace("t","	").replace("v","")}(n,t)),t===null&&(r=n),t}function parse_nonEscapeChar(){var e,t,n,s,o;return n=r,s=r,o=r,i++,e=parse_escapeChar(),i--,e===null?e="":(e=null,r=o),e!==null?(t=parse_sourceChar(),t!==null?e=[e,t]:(e=null,r=s)):(e=null,r=s),e!==null&&(e=function(e,t){return t}(n,e[1])),e===null&&(r=n),e}function parse_escapeChar(){var t;return t=parse_singleEscapeChar(),t===null&&(t=parse_digit(),t===null&&(e.charCodeAt(r)===120?(t="x",r++):(t=null,i===0&&matchFailed('"x"')),t===null&&(e.charCodeAt(r)===117?(t="u",r++):(t=null,i===0&&matchFailed('"u"'))))),t}function parse_sourceChar(){var t;return e.length>r?(t=e.charAt(r),r++):(t=null,i===0&&matchFailed("any character")),t}function parse_number(){var e,t,n,i,s;return i=r,s=r,e=parse_integer(),e!==null?(t=parse_fraction(),t!==null?(n=parse_exponent(),n!==null?e=[e,t,n]:(e=null,r=s)):(e=null,r=s)):(e=null,r=s),e!==null&&(e=function(e,t,n,r){return t+n+r}(i,e[0],e[1],e[2])),e===null&&(r=i),e===null&&(i=r,s=r,e=parse_integer(),e!==null?(t=parse_fraction(),t!==null?e=[e,t]:(e=null,r=s)):(e=null,r=s),e!==null&&(e=function(e,t,n){return t+n}(i,e[0],e[1])),e===null&&(r=i),e===null&&(i=r,s=r,e=parse_integer(),e!==null?(t=parse_exponent(),t!==null?e=[e,t]:(e=null,r=s)):(e=null,r=s),e!==null&&(e=function(e,t,n){return t+n}(i,e[0],e[1])),e===null&&(r=i),e===null&&(e=parse_integer()))),e}function parse_integer(){var e;return e=parse_positiveInteger(),e===null&&(e=parse_negativeInteger()),e}function parse_positiveInteger(){var e;return e=parse_digitsTenPlus(),e===null&&(e=parse_digit()),e}function parse_negativeInteger(){var t,n,s,o;return s=r,o=r,e.charCodeAt(r)===45?(t="-",r++):(t=null,i===0&&matchFailed('"-"')),t!==null?(n=parse_digitsTenPlus(),n!==null?t=[t,n]:(t=null,r=o)):(t=null,r=o),t!==null&&(t=function(e,t){return"-"+t}(s,t[1])),t===null&&(r=s),t===null&&(s=r,o=r,e.charCodeAt(r)===45?(t="-",r++):(t=null,i===0&&matchFailed('"-"')),t!==null?(n=parse_digit(),n!==null?t=[t,n]:(t=null,r=o)):(t=null,r=o),t!==null&&(t=function(e,t){return"-"+t}(s,t[1])),t===null&&(r=s)),t}function parse_fraction(){var t,n,s,o;return s=r,o=r,e.charCodeAt(r)===46?(t=".",r++):(t=null,i===0&&matchFailed('"."')),t!==null?(n=parse_digits(),n!==null?t=[t,n]:(t=null,r=o)):(t=null,r=o),t!==null&&(t=function(e,t){return"."+t}(s,t[1])),t===null&&(r=s),t}function parse_exponent(){var e,t,n,i;return n=r,i=r,e=parse_eSign(),e!==null?(t=parse_digits(),t!==null?e=[e,t]:(e=null,r=i)):(e=null,r=i),e!==null&&(e=function(e,t,n){return t+n}(n,e[0],e[1])),e===null&&(r=n),e}function parse_eSign(){var t,n,s,o;return s=r,o=r,/^[eE]/.test(e.charAt(r))?(t=e.charAt(r),r++):(t=null,i===0&&matchFailed("[eE]")),t!==null?(/^[+\-]/.test(e.charAt(r))?(n=e.charAt(r),r++):(n=null,i===0&&matchFailed("[+\\-]")),n=n!==null?n:"",n!==null?t=[t,n]:(t=null,r=o)):(t=null,r=o),t!==null&&(t=function(e,t,n){return t+n}(s,t[0],t[1])),t===null&&(r=s),t}function parse_digitsTenPlus(){var e,t,n,i;return n=r,i=r,e=parse_digitNoZero(),e!==null?(t=parse_digits(),t!==null?e=[e,t]:(e=null,r=i)):(e=null,r=i),e!==null&&(e=function(e,t,n){return t+n}(n,e[0],e[1])),e===null&&(r=n),e}function parse_digits(){var e,t,n;n=r,t=parse_digit();if(t!==null){e=[];while(t!==null)e.push(t),t=parse_digit()}else e=null;return e!==null&&(e=function(e,t){return t.join("")}(n,e)),e===null&&(r=n),e}function parse_digitHex(){var t;return/^[0-9a-fA-F]/.test(e.charAt(r))?(t=e.charAt(r),r++):(t=null,i===0&&matchFailed("[0-9a-fA-F]")),t}function parse_digitNoZero(){var t;return/^[1-9]/.test(e.charAt(r))?(t=e.charAt(r),r++):(t=null,i===0&&matchFailed("[1-9]")),t}function parse_digit(){var t;return/^[0-9]/.test(e.charAt(r))?(t=e.charAt(r),r++):(t=null,i===0&&matchFailed("[0-9]")),t}function parse__(){var e,t;e=[],t=parse_whitespace();while(t!==null)e.push(t),t=parse_whitespace();return e}function parse_whitespace(){var t;return e.charCodeAt(r)===32?(t=" ",r++):(t=null,i===0&&matchFailed('" "')),t}function cleanupExpected(e){e.sort();var t=null,n=[];for(var r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}function computeErrorPosition(){var t=1,n=1,i=!1;for(var o=0;o<Math.max(r,s);o++){var u=e.charAt(o);u==="\n"?(i||t++,n=1,i=!1):u==="\r"||u==="\u2028"||u==="\u2029"?(t++,n=1,i=!0):(n++,i=!1)}return{line:t,column:n}}function headTailMerge(e,t,n){var r=[e];for(var i=0;i<t.length;i++)r.push(t[i][n]);return r}function hasMultiRest(e){for(var t=0,n=0,r;r=e[t];t++){if(r.type==="rest"||r.type==="restIdentifier")n+=1;if(n>1)return!0}return!1}function patternStrings(e){return e.map(function(e){return e.pattern})}function throwMultRestError(e){throw new SyntaxError("Multiple rest paramaters are not allowed in sub-pattern "+e)}var n={start:parse_start,argumentList:parse_argumentList,array:parse_array,object:parse_object,classArray:parse_classArray,classObject:parse_classObject,capture:parse_capture,keyValue:parse_keyValue,patterns:parse_patterns,pattern:parse_pattern,capturePattern:parse_capturePattern,arrayRestPatterns:parse_arrayRestPatterns,objectRestPatterns:parse_objectRestPatterns,objectPattern:parse_objectPattern,restPattern:parse_restPattern,wildcard:parse_wildcard,identifier:parse_identifier,jsIdentifier:parse_jsIdentifier,restIdentifier:parse_restIdentifier,rest:parse_rest,className:parse_className,key:parse_key,nullLiteral:parse_nullLiteral,undefinedLiteral:parse_undefinedLiteral,booleanLiteral:parse_booleanLiteral,numberLiteral:parse_numberLiteral,stringLiteral:parse_stringLiteral,"boolean":parse_boolean,keyChars:parse_keyChars,restChars:parse_restChars,identifierChars:parse_identifierChars,classNameChars:parse_classNameChars,jsIdentifierChars:parse_jsIdentifierChars,string:parse_string,doubleQuotedStringChars:parse_doubleQuotedStringChars,singleQuotedStringChars:parse_singleQuotedStringChars,doubleQuotedStringChar:parse_doubleQuotedStringChar,singleQuotedStringChar:parse_singleQuotedStringChar,escapeSequence:parse_escapeSequence,hexEscapeSequence:parse_hexEscapeSequence,unicodeEscapeSequence:parse_unicodeEscapeSequence,nullEscapeSequence:parse_nullEscapeSequence,charEscapeSequence:parse_charEscapeSequence,singleEscapeChar:parse_singleEscapeChar,nonEscapeChar:parse_nonEscapeChar,escapeChar:parse_escapeChar,sourceChar:parse_sourceChar,number:parse_number,integer:parse_integer,positiveInteger:parse_positiveInteger,negativeInteger:parse_negativeInteger,fraction:parse_fraction,exponent:parse_exponent,eSign:parse_eSign,digitsTenPlus:parse_digitsTenPlus,digits:parse_digits,digitHex:parse_digitHex,digitNoZero:parse_digitNoZero,digit:parse_digit,_:parse__,whitespace:parse_whitespace};if(t!==undefined){if(n[t]===undefined)throw new Error("Invalid rule name: "+quote(t)+".")}else t="start";var r=0,i=0,s=0,o=[],u=n[t]();if(u===null||r!==e.length){var a=Math.max(r,s),f=a<e.length?e.charAt(a):null,l=computeErrorPosition();throw new this.SyntaxError(cleanupExpected(o),f,a,l.line,l.column)}return u},toSource:function(){return this._source}};return e.SyntaxError=function(e,t,n,r,i){function buildMessage(e,t){var n,r;switch(e.length){case 0:n="end of input";break;case 1:n=e[0];break;default:n=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return r=t?quote(t):"end of input","Expected "+n+" but "+r+" found."}this.name="SyntaxError",this.expected=e,this.found=t,this.message=buildMessage(e,t),this.offset=n,this.line=r,this.column=i},e.SyntaxError.prototype=Error.prototype,e}(),e.exports}(),require.modules["./compiler"]=function(){function compile(e){var t=["var ret = [];",compileArgumentList(e),"return ret;"];return new Function(["args","runt"],t.join("\n"))}function compileArgumentList(e){var t=[];for(var n=0,r=e.value.length,i;n<r;n++)i="arg_"+n,t.push("var "+i+" = args["+n+"];",compilePattern(i,e.value[n]));return t.join("\n")}function compilePattern(e,t){return n[t.type](e,t)}function compileWildcard(){return""}function compileNull(e){return"if ("+e+" !== null) return false;"}function compileUndefined(e){return"if ("+e+" !== void 0) return false;"}function compileBoolean(e,t){return"if ("+e+" !== "+t.pattern+") return false;"}function compileNumber(e,t){return"if ("+e+" !== "+t.pattern+") return false;"}function compileString(e,t){return"if ("+e+" !== "+t.pattern+") return false;"}function compileIdentifier(e){return"ret.push("+e+");"}function compileClassName(e,t){return"if (!runt.matchesTypeName("+e+", '"+t.value+"')) return false;"}function compileCapture(e,t){var n=["ret.push("+e+");",compilePattern(e,t.children[0])];return n.join("\n")}function hasRest(e){for(var t=0,n;n=e.children[t];t++)if(n.type==="rest"||n.type==="restIdentifier")return!0;return!1}function compileArray(e,t){return hasRest(t)?compileArrayRest(e,t):compileArrayStrict(e,t)}function compileArrayStrict(e,t){var n=t.children.length,r=["if (!("+e+" instanceof Array) || "+e+".length !== "+n+") return false;"];return t.children.forEach(function(t,n){var i=e+"_"+n;r.push("var "+i+" = "+e+"["+n+"];",compilePattern(i,t))}),r.join("\n")}function compileArrayRest(e,t){var n=t.children.length,r=n-1,i=e+"_pos",s=["if (!("+e+" instanceof Array) || "+e+".length < "+r+") return false;","var "+i+" = 0;"];return t.children.forEach(function(t,n){var o=e+"_"+n,u=t.type==="restIdentifier";u||t.type==="rest"?n===r&&u?s.push("ret.push("+e+".slice("+n+"));"):n===0?(s.push(i+" = "+e+".length - "+r+";"),u&&s.push("ret.push("+e+".slice(0, "+i+"));")):(s.push(i+" = "+e+".length - "+(r-n)+";"),u&&s.push("ret.push("+e+".slice("+n+", "+i+"));")):(s.push("var "+o+" = "+e+"["+i+"++];"),s.push(compilePattern(o,t)))}),s.join("\n")}function compileObject(e,t){return hasRest(t)?compileObjectRest(e,t):compileObjectStrict(e,t)}function compileObjectStrict(e,t){var n=e+"_keys",r=e+"_count",i=e+"_i",s=t.children.map(function(e){return e.value+":1"}),o=["if (!("+e+" instanceof Object)) return false;","var "+n+" = {"+s.join(",")+"};","var "+r+" = 0;","for (var "+i+" in "+e+") {","if (!("+n+".hasOwnProperty("+i+"))) return false;","else "+r+" += 1;","}","if ("+r+" !== "+t.children.length+") return false;"];return t.children.forEach(function(t,n){var r=e+"_"+n;t.type==="key"?o.push("ret.push("+e+"["+t.value+"]);"):o.push("var "+r+" = "+e+"["+t.value+"];",compilePattern(r,t.children[0]))}),o.join("\n")}function compileObjectRest(e,t){var n=e+"_keys",r=e+"_count",i=e+"_rest",s=e+"_i",o=t.children.length-1,u=!1,a=[];t.children.forEach(function(e){e.type==="restIdentifier"?u=!0:e.type!=="rest"&&a.push(e.value+":1")});var f=["if (!("+e+" instanceof Object)) return false;","var "+n+" = {"+a.join(",")+"};","var "+r+" = 0;"];return u&&f.push("var "+i+" = {};"),f.push("for (var "+s+" in "+e+") {"),u?f.push("if (!("+n+".hasOwnProperty("+s+"))) "+i+"["+s+"] = "+e+"["+s+"];","else "+r+" += 1;"):f.push("if ("+n+".hasOwnProperty("+s+")) "+r+" += 1;"),f.push("}","if ("+r+" !== "+o+") return false;"),t.children.forEach(function(t,n){var r=e+"_"+n;t.type==="key"?f.push("ret.push("+e+"["+t.value+"]);"):t.type==="keyValue"?f.push("var "+r+" = "+e+"["+t.value+"];",compilePattern(r,t.children[0])):t.type==="restIdentifier"&&f.push("ret.push("+i+");")}),f.join("\n")}function compileClassArray(e,t){var n=e+"_vals",r=["if (!("+e+" instanceof Object)) return false;",compileClassName(e,t),"if (!"+e+".constructor || !"+e+".constructor.unapply) return false;","var "+n+" = "+e+".constructor.unapply("+e+");",compileArray(n,t)];return r.join("\n")}function compileClassObject(e,t){var n=e+"_vals",r=["if (!("+e+" instanceof Object)) return false;",compileClassName(e,t),"if (!"+e+".constructor || !"+e+".constructor.unapplyObj) return false;","var "+n+" = "+e+".constructor.unapplyObj("+e+");",compileObject(n,t)];return r.join("\n")}var e={exports:{}},t=e.exports;t.compile=compile;var n={wildcard:compileWildcard,"null":compileNull,"undefined":compileUndefined,"boolean":compileBoolean,number:compileNumber,string:compileString,identifier:compileIdentifier,array:compileArray,object:compileObject,classArray:compileClassArray,classObject:compileClassObject,className:compileClassName,capture:compileCapture};return e.exports}(),require.modules["./runtime"]=function(){function matchesTypeName(e,t){var r=n.call(e);if(r.substring(8,r.length-1)===t)return!0;if(e.constructor)if(e.constructor.name===t||e.constructor.className===t)return!0;return!1}var e={exports:{}},t=e.exports,n=Object.prototype.toString;return t.matchesTypeName=matchesTypeName,e.exports}(),require.modules["./matcher"]=function(){function Matcher(e,t,n){this.patternFn=e,this.successFn=t,this.next=n}var e={exports:{}},t=e.exports,n=require("./runtime");return t.Matcher=Matcher,Matcher.prototype.match=function(e,t){var r=this.patternFn(e,n);if(r)return this.successFn.apply(t,r);if(this.next)return this.next.match(e,t);throw new TypeError("All patterns exhausted")},Matcher.prototype.clone=function(){var e=new Matcher(this.patternFn,this.successFn);return this.next&&(e.next=this.next.clone()),e},Matcher.prototype.last=function(){var e=this;while(e.next)e=e.next;return e},Matcher.prototype.pop=function(){var e=this,t;while(e.next)t=e,e=e.next;return t&&(t.next=null),e},e.exports}(),require.modules["./matches"]=function(){function pattern(){var e=s.call(arguments),t=typeof e[0],i=typeof e[1],a=typeof e[2],f,l,c,h,p,d,v,m;if(t!="function"||i!="undefined"&&i!="object"){if(t!="object"||i!="undefined"&&i!="object")return t=="function"&&i=="function"?(d=e[2]?e[2].clone():null,matcher(e[0],e[1],d)):(h=e[0],p=e[1],d=e[2]?e[2].clone():null,h in o?c=o[h]:(v=n.parse(h),v.pattern in u?c=o[h]=u[v.pattern]:(c=r.compile(v),c.pattern=v.pattern,o[h]=c,u[v.pattern]=c)),matcher(c,p,d));l=e[0],d=e[1]?e[1].clone():null;for(h in l)f=pattern(h,l[h],d),d=f.__matchChain;return f}f=e[0],d=e[1];if(!f.__matchChain)throw new Error("Not a matcher function");return d?(d=d.clone(),d.last().next=f.__matchChain.clone()):d=f.__matchChain.clone(),m=d.pop(),matcher(m.patternFn,m.successFn,d)}function matcher(e,t,n){var r=new i(e,t);n?n.last().next=r:n=r;var o=function(){var e=s.call(arguments);return n.match(e,this)};return o.alt=function(){var e=s.call(arguments);return e.push(n),pattern.apply(null,e)},o.__matchChain=n,o}function caseOf(){var e=s.call(arguments,0,-1),n=arguments[arguments.length-1],r=this===t?null:this;if(typeof n=="function"){if(!n.__matchChain)throw new Error("Not a matcher function");return n.apply(r,e)}return pattern(n).apply(r,e)}var e={exports:{}},t=e.exports,n=require("./parser"),r=require("./compiler"),i=require("./matcher").Matcher,s=Array.prototype.slice,o={},u={};return t.pattern=pattern,t.caseOf=caseOf,t.parser=n,t.compiler=r,e.exports}(),window.matches=require("./matches")})();